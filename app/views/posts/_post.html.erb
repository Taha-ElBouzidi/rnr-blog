<%= turbo_frame_tag dom_id(post) do %>
  <div class="card">
    <%= render "posts/status_badge", post: post %>
    
    <%= link_to post_path(post), class: "no-underline", data: { turbo_frame: "_top" } do %>
      <h3 class="post-title"><%= post.title %></h3>
    <% end %>
    
    <p class="text-gray-600 text-sm leading-normal mb-3">
      <%= truncate(post.body, length: 150, separator: ' ') %>
    </p>
    
    <div class="flex items-center justify-between border-t border-gray-200 pt-3">
      <div class="flex items-center gap-3">
        <span class="text-sm text-gray-600"><%= post.user&.name || "Unknown" %></span>
        <span class="text-sm text-gray-600"><%= comments_count_text(post.comments_count) %></span>
      </div>
      
      <div class="flex gap-2">
        <%= link_to "View", post_path(post), class: "btn-sm btn-secondary", data: { turbo_frame: "_top" } %>
        <% if allowed_to?(:update?, post) %>
          <%= link_to "Edit", edit_post_path(post), class: "btn-sm btn-secondary", data: { turbo_frame: "edit_post_#{post.id}" } %>
        <% end %>
        <% if allowed_to?(:destroy?, post) %>
          <%= button_to "Delete", post_path(post), method: :delete, class: "btn-sm btn-danger" %>
        <% end %>
      </div>
    </div>
  </div>
  
  <%= turbo_frame_tag "edit_post_#{post.id}" %>
<% end %>
